This is a documentation of the data types used in Matlab code. The structure
data type and duck typing are heavily used. You most probably need to know
object-oriented programming (preferentially with a duck-typed programming
language) to understand any of this.



The materials of layers are represented as a variable mixture of two fixed
mixtures. The variable mixture data type has a property x which expresses the
relative proportions of the two fixed mixtures the variable mixture is
composed of.

The idea is that each mixture (both variable and fixed) can be downgraded to a
single material. However, if we do so, we lose valuable information. If a
variable mixture is downgraded to a material, we can't adjust its composition
anymore. A fixed mixture can be downgraded to a material 

The variable mixture data type is a structure which contains the following fields:
- first: a fixed mixture
- second: a fixed mixture
- x: relative proportion of second fixed mixture
Both fixed mixtures must be valid fixed mixtures even if x==0 or x==1. If you
want to have a variable mixture that is composed of only ony fixed mixture,
set both fixed mixtures to equal values or set one of them to a legal dummy
value and set x=0 or x=1 (to omit the dummy value).

The fixed mixture data type is a {n,2} cell array. fixedmixture{n,1} is the
proportion of the material fixedmixture{n,2} (see the material data type). The
sum of the proportions need not be 1 since it is automatically scaled. Note
that it is perfectly legal for a fixed mixture to be composed of only one
material.

The elastic properties data type is a structure which contains the following
fields:
- poissonratio: Poisson's ratio
- xyspace: characteristic length parallel to surface
- zspace: interplanar spacing

The Zmaterial data type is inherited from the elastic properties data type. It has the following fields:
- poissonratio [inherited from elastic properties]
- xyspace [inherited from elastic properties]
- zspace [inherited from elastic properties]
-
- V
- H
-
- r
- Z
- occupation
In some special cases, the Poisson's ratio is an empty matrix. This means that
the material is already strained so you shouldn't use Poisson's ratio to
calculate anything.


The material data type is the same as Zmaterial, but Z is replaced by sf_a,
sf_b, sf_c, B and hoenl. hoenl contains the Hönl corrections in a column
vector. Btable contains the Debye B-coefficients in a column vector. sf_a,
sf_b and sf_c contain the coefficients to calculate scattering factors. sf_a
and sf_b are nxm matrices where n is the number of atoms and m is the number
of gaussians. sf_c is a nx1 column vector. A material data type also contains
the wavelength lambda for which the properties are calculated. A material is
only for a single constant wavelength. If you need to use multiple
wavelengths, you must convert the Zmaterial to multiple materials for each
wavelength. A Zmaterial can be converted to a material by the Zmat2mat
function. Reverse conversion is not possible.



For quick calculation of the susceptibility of a variable mixture as a
function of x, the option to "premix" materials is provided. A variable
mixture is converted to a temporary data type which has all the necessary
information to calculate the susceptibility quickly for arbitrary x. The
data type is called mix context.

The mix context data type is a structure, which has the following fields:
elastic properties:
- poissonratio1
- poissonratio2
- xyspace1
- xyspace2
- zspace1
- zspace2
other properties:
- relV
- H
- lambda
atomic position information:
- r
- occupation1
- occupation2
other atomic information:
- B
- hoenl
- sf_a
- sf_b
- sf_c
See matsusc2_premix.m and matsusc2_premixed.m for more documentation.

The susceptibility data type is a 1x3 vector which has the complex
susceptibilities chi0, chih and chihinv, in order.
